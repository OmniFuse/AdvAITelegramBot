import os
from pyrogram import Client, filters     #Interact with Telegram API
from gtts import gTTS

# Identification of your Telegram
api_id = 'API_ID'
api_hash = 'API_ID_HASH'
bot_token = 'BOT_TOKEN'

bot = Client("my_bot", 
            api_id=api_id, 
            api_hash=api_hash, 
            bot_token=bot_token )

#command to initiate the process
@bot.on_message(filters.command("start"))
def start(client, message):
    message.reply_text("Hello! Give me any text and I'll bring it to life with my voice! ")

#text_to_speech in mp3 file
@bot.on_message(filters.text & ~filters.command("start"))
def text_to_speech(client, message):
    text = message.text
    language = 'en'
    
    speech = gTTS(text=text, lang=language, slow=False)
    speech_file = "output.mp3"    #sets file name for generated file
    speech.save(speech_file)      #saves the speech to specified file

    client.send_audio(message.chat.id, audio=speech_file)

    os.remove(speech_file)  #cleans the space

if __name__ == "__main__":


  bot.run() #starts the bot
